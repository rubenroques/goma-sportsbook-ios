name: Sportsbook # The name of the App
options: # Some general settings for the project
  minimumXcodeGenVersion: 2.25.0
  createIntermediateGroups: true # If the folders are nested, also nest the groups in Xcode
  indentWidth: 2 # indent by 2 spaces
  tabWidth: 4 # a tab is 2 spaces
  bundleIdPrefix: "com.gomagaming.sportsbook"
  deploymentTarget: "13.0"
  groupOrdering: 
    - order: [Core, Clients]
    - pattern: 'Core'
      order: [App, Services, Screens, Stores, Models, Views, Constants, Protocols, Tools, Resources]

settings:
  MARKETING_VERSION: "0.0.2"
  CURRENT_PROJECT_VERSION: "00206"
  DEVELOPMENT_TEAM: 422GNXXZJR
  TARGETED_DEVICE_FAMILY: "1,2"
  CLANG_ANALYZER_LOCALIZABILITY_NONLOCALIZED: true

targets: # The List of our targets
  ShowcaseProd:
    templates: [BaseApp]
    templateAttributes:
      clientTargetName: Showcase
      clientTargetEnvName: Prod
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: "com.gomagaming.sportsbook.showcase"

  ShowcaseBeta:
    templates: [BaseApp]
    templateAttributes:
      clientTargetName: Showcase
      clientTargetEnvName: Beta
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: "com.gomagaming.sportsbook.showcasebeta"

  SportsbookTests:
    platform: iOS
    type: bundle.unit-test
    sources:
      - path: Tests
        type: group
    dependencies:
      - target: ShowcaseProd
    settings:
      base:
        INFOPLIST_FILE: Tests/CoreTests/Info.plist
    scheme:
      testTargets:
        - SportsbookTests
      gatherCoverageData: true

#==============================================================================================================

targetTemplates:
  BaseApp:
    type: application
    platform: iOS
    deploymentTarget: "13.0"
    sources:
      - path: Core
        excludes:
          - "Tests/"
      - Clients/${clientTargetName}/${clientTargetEnvName}
      - Clients/${clientTargetName}/ClientVariables.swift
      - Clients/${clientTargetName}/${clientTargetName}-Assets.xcassets
      - Clients/${clientTargetName}/ThemeColors.xcassets

    settings:
      base:
        # Clients/Showcase/Beta/ShowcaseBeta-Info.plist
        INFOPLIST_FILE: Clients/${clientTargetName}/${clientTargetEnvName}/${clientTargetName}${clientTargetEnvName}-Info.plist
        # Clients/Showcase/Beta/ShowcaseBeta.entitlements
        CODE_SIGN_ENTITLEMENTS: Clients/${clientTargetName}/${clientTargetEnvName}/${clientTargetName}${clientTargetEnvName}.entitlements

    dependencies: 
      - package: MultiSlider
      - package: Starscream
      - package: CombineCocoa
      - package: Kingfisher
      - package: Nuke
      - package: Reachability
      - package: DictionaryCoding
      - package: swift-collections
        product: OrderedCollections
      - package: swift-collections
        product: Collections
      - package: Firebase
        product: FirebaseDatabase
      - package: Firebase
        product: FirebaseAnalytics
      - package: Firebase
        product: FirebaseCrashlytics
      - package: Firebase
        product: FirebaseAuth

    # scripts
    postCompileScripts:
      # swiftlint
      - script: |
                if which swiftlint >/dev/null; then
                  swiftlint --config .swiftlint.yml
                else
                  echo "warning: SwiftLint not installed, download from https://github.com/realm/SwiftLint"
                fi
        name: Swiftlint

#==============================================================================================================

packages:
  Reachability:
    url: https://github.com/ashleymills/Reachability.swift
    from: 5.1.0
  Nuke:
    url: https://github.com/kean/Nuke.git
    from: 10.3.2
  DictionaryCoding:
    url: https://github.com/elegantchaos/DictionaryCoding.git
    from: 1.0.9
  Starscream:
    url: https://github.com/daltoniam/Starscream.git
    from: 3.1.1
  CombineCocoa:
    url: https://github.com/CombineCommunity/CombineCocoa.git
    from: 0.3.0
  Kingfisher:
    url: https://github.com/onevcat/Kingfisher
    from: 7.0.0
  Firebase:
    url: https://github.com/firebase/firebase-ios-sdk.git
    from: 7.0.0
  MultiSlider:
    url: https://github.com/yonat/MultiSlider
    from: 1.11.2
  swift-collections: 
    url: https://github.com/apple/swift-collections.git
    from: 1.0.0
